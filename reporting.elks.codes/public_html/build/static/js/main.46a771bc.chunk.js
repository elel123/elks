(this.webpackJsonpanalytics=this.webpackJsonpanalytics||[]).push([[0],{209:function(e,t,n){},214:function(e,t){},216:function(e,t){},230:function(e,t){},232:function(e,t){},260:function(e,t){},262:function(e,t){},263:function(e,t){},268:function(e,t){},270:function(e,t){},289:function(e,t){},301:function(e,t){},304:function(e,t){},331:function(e,t,n){},332:function(e,t,n){"use strict";n.r(t);var c=n(0),s=n(20),i=n.n(s),a=(n(209),n(25)),r=n(41),o=n(23),l=n(5),d=function e(){Object(l.a)(this,e)};d.LOGIN="/login",d.LOGOUT="/logout",d.LANDING="/",d.VIS1="/vis1",d.VIS2="/vis2",d.VIS3="/vis3",d.ADMIN="/admin";var j=n(378),u=n(380),b=(n(103),n(210));function h(e){null===e?window.localStorage.removeItem("jwttoken"):window.localStorage.setItem("jwttoken",e)}function O(){return window.localStorage.getItem("jwttoken")}function p(){var e=window.localStorage.getItem("jwttoken");return null!==e&&b.decode(e,{complete:!0}).payload.isAdmin}var f=n(4);function x(e){var t=e.adminState,n=e.loginState,c=Object(o.f)(),s=t.isAdmin,i=t.setAdmin,a=n.logIn,r=n.setLogIn,l=function(e){c.push(e)};return Object(f.jsxs)(j.a,{className:"bg-secondary",expand:"lg",children:[Object(f.jsx)(j.a.Brand,{onClick:function(){c.push(d.VIS1)},style:{cursor:"pointer",color:"#e6e6e6"},children:"Elks.Code Reporting "}),Object(f.jsx)(j.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(f.jsx)(j.a.Collapse,{id:"basic-navbar-nav",children:Object(f.jsxs)(u.a,{className:"mr-auto",children:[Object(f.jsx)(u.a.Link,{onClick:function(){r(!a)},style:{color:"#e6e6e6"},children:"Toggle"}),a?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(u.a.Link,{onClick:function(){l(d.VIS1)},style:{color:"#e6e6e6"},children:"Vis1"}),Object(f.jsx)(u.a.Link,{onClick:function(){l(d.VIS2)},style:{color:"#e6e6e6"},children:"Vis2"}),Object(f.jsx)(u.a.Link,{onClick:function(){l(d.VIS3)},style:{color:"#e6e6e6"},children:"Vis3"}),Object(f.jsx)(u.a.Link,{onClick:function(){r(!1),h(null),i(!1),c.push(d.LOGOUT)},style:{color:"#e6e6e6"},children:"Logout"})]}):null,s?Object(f.jsx)(u.a.Link,{onClick:function(){l(d.ADMIN)},style:{color:"#e6e6e6"},children:"Admin"}):null,Object(f.jsx)(u.a.Link,{onClick:function(){console.log(O())},style:{color:"#e6e6e6"},children:"ViewToken"})]})})]})}function m(e){var t=e.children,n=e.adminState,c=e.loginState;return Object(f.jsxs)("div",{children:[Object(f.jsx)(x,{loginState:c,adminState:n}),t]})}function g(){var e=Object(o.f)();return Object(f.jsxs)("div",{children:[Object(f.jsx)("p",{children:" This is the Landing Page! Welcome!!! :) "}),Object(f.jsx)("p",{onClick:function(){e.push(d.LOGIN)},style:{color:"blue",cursor:"pointer"},children:Object(f.jsx)("u",{children:"Return to login"})})]})}var v=n(22),w=n.n(v),y=n(32),A=n(192);function S(e,t){fetch("https://www.elks.codes/server/jwt/verify",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jwtToken:e})}).then(function(){var e=Object(y.a)(w.a.mark((function e(n){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(200==n.status);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){t(!1)}))}n(330);var I=n(193);function k(e){var t=e.adminState,n=e.loginState,s=Object(o.f)(),i=(t.isAdmin,t.setAdmin),r=(n.logIn,n.setLogIn),l=Object(c.useState)({}),j=Object(a.a)(l,2),u=j[0],b=j[1],x=function(e){var t,n=[],c=Object(A.a)(e);try{for(c.s();!(t=c.n()).done;){var s=t.value;null!==s._id&&""!==s._id&&-1===s._id.indexOf("public_html")&&n.push([s._id,s.count])}}catch(r){c.e(r)}finally{c.f()}n.sort((function(e,t){return t[1]-e[1]}));var i=n.slice(0,5).map((function(e){return e[0]})),a=n.slice(0,5).map((function(e){return e[1]}));b({type:"bar",width:"100%",adjustLayout:!0,plotarea:{margin:"dynamic",marginTop:70},title:{text:"Activity Per Page On elks.codes",fontSize:24},legend:{draggable:!0},scaleX:{label:{text:"Page"},labels:i},scaleY:{label:{text:"Number of Activity"}},plot:{animation:{effect:"ANIMATION_EXPAND_BOTTOM",method:"ANIMATION_STRONG_EASE_OUT",sequence:"ANIMATION_BY_NODE",speed:275}},series:[{values:a,text:"Number of Activity"}]})};return Object(c.useEffect)((function(){fetch("https://www.elks.codes/server/api/activity/pages?jwt=".concat(O()),{method:"GET",headers:{Accept:"application/json"}}).then(function(){var e=Object(y.a)(w.a.mark((function e(t){var n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200!==t.status){e.next=9;break}return r(!0),i(p()),e.next=5,t.json();case 5:n=e.sent,x(n),e.next=13;break;case 9:r(!1),h(null),i(!1),s.push(d.LOGIN);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){r(!1),h(null),i(!1),s.push(d.LOGIN)}))}),[]),Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("br",{}),Object(f.jsx)("br",{}),Object(f.jsx)("div",{style:{margin:"0px 50px"},children:Object(f.jsx)(I.a,{data:u})})]})}function C(e){var t=e.adminState,n=e.loginState,s=Object(o.f)(),i=(t.isAdmin,t.setAdmin),r=(n.logIn,n.setLogIn),l=Object(c.useState)(!0),j=Object(a.a)(l,2),u=j[0],b=j[1];return Object(c.useEffect)((function(){S(O(),(function(e){e?b(!1):(r(!1),h(null),i(!1),s.push(d.LOGIN))}))}),[]),Object(c.useEffect)((function(){u||console.log("Access Granted")}),[u]),Object(f.jsx)("div",{children:Object(f.jsx)("p",{children:" This is the Vis #2 Page "})})}function L(e){var t=e.adminState,n=e.loginState,s=Object(o.f)(),i=(t.isAdmin,t.setAdmin),r=(n.logIn,n.setLogIn),l=Object(c.useState)(!0),j=Object(a.a)(l,2),u=j[0],b=j[1];return Object(c.useEffect)((function(){S(O(),(function(e){e?b(!1):(r(!1),h(null),i(!1),s.push(d.LOGIN))}))}),[]),Object(c.useEffect)((function(){u||console.log("Access Granted")}),[u]),Object(f.jsx)("div",{children:Object(f.jsx)("p",{children:" This is the Vis #3 Page "})})}n(331);function N(e,t,n){return T.apply(this,arguments)}function T(){return(T=Object(y.a)(w.a.mark((function e(t,n,c){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("".concat(t," ").concat(n)),fetch("https://www.elks.codes/server/user/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:n})}).then(function(){var e=Object(y.a)(w.a.mark((function e(t){var n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200!==t.status){e.next=7;break}return e.next=3,t.json();case 3:n=e.sent,c(t,n),e.next=8;break;case 7:c(null,null);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e),c(null,null)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(e){var t=e.adminState,n=e.loginState,s=Object(c.useState)(""),i=Object(a.a)(s,2),r=i[0],l=i[1],j=Object(c.useState)(""),u=Object(a.a)(j,2),b=u[0],x=u[1],m=Object(o.f)(),g=(t.isAdmin,t.setAdmin),v=(n.logIn,n.setLogIn);Object(c.useEffect)((function(){null!==O()&&(console.log("we are here"),S(O(),(function(e){e?(console.log("redirecting"),v(!0),g(p()),m.push(d.VIS1)):(console.log("clearing input"),v(!1),h(null),g(!1))})))}),[]);var A=function(){var e=Object(y.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),N(r,b,(function(e,t){null==e?(alert("Login Failed. Please Try Again."),l(""),x("")):(h(t.token),v(!0),t.isAdmin&&g(!0),m.push(d.VIS1))}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsxs)("div",{className:"login-wrapper",style:{marginTop:"50px"},children:[Object(f.jsx)("h1",{children:" Log In "}),Object(f.jsx)("br",{}),Object(f.jsxs)("form",{onSubmit:A,children:[Object(f.jsxs)("label",{children:[Object(f.jsx)("p",{children:"Username"}),Object(f.jsx)("input",{type:"text",value:r,onChange:function(e){return l(e.target.value)}})]}),Object(f.jsx)("br",{}),Object(f.jsxs)("label",{children:[Object(f.jsx)("p",{children:"Password"}),Object(f.jsx)("input",{type:"password",value:b,onChange:function(e){return x(e.target.value)}})]}),Object(f.jsxs)("div",{children:[Object(f.jsx)("br",{}),Object(f.jsx)("button",{type:"submit",children:"Log In"})]})]})]})}function P(){var e=Object(o.f)();return Object(f.jsxs)("div",{children:[Object(f.jsx)("p",{children:" This is the Logout Page "}),Object(f.jsx)("p",{onClick:function(){e.push(d.LOGIN)},style:{color:"blue",cursor:"pointer"},children:Object(f.jsx)("u",{children:"Return to login"})})]})}function U(){return Object(f.jsx)("div",{children:Object(f.jsx)("p",{children:" This is the Custom404 Page "})})}var G=n(39),V=n(194),_=n(377),D=n(382),Y=n(383),F=n(376),M=n(373),W=n(384),J=n(379),B=n(385);function R(e){var t=e.adminState,n=(Object(o.f)(),t.isAdmin,t.setAdmin,Object(c.useState)([])),s=Object(a.a)(n,2),i=s[0],r=s[1],l=Object(c.useState)([]),d=Object(a.a)(l,2),j=d[0],u=d[1],b=Object(c.useState)(!1),h=Object(a.a)(b,2),p=h[0],x=h[1],m=Object(c.useState)(!1),g=Object(a.a)(m,2),v=g[0],A=g[1],S=Object(c.useState)(!1),I=Object(a.a)(S,2),k=I[0],C=I[1],L=Object(c.useState)({_id:"",email:"",password:"",isAdmin:!1}),N=Object(a.a)(L,2),T=N[0],E=N[1],P=function(e){x(!1)},U=function(e){A(!1)},R=function(e){C(!1)},H=function(){fetch("https://www.elks.codes/server/user?jwt=".concat(O()),{method:"GET",headers:{Accept:"application/json"}}).then(function(){var e=Object(y.a)(w.a.mark((function e(t){var n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200!==t.status){e.next=7;break}return e.next=3,t.json();case 3:n=e.sent,r(Object(V.a)(n)),e.next=9;break;case 7:console.log(t),alert("You do not have admin privileges.");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e),alert("You do not have admin privileges.")}))},X=function(e){fetch("https://www.elks.codes/server/user",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({jwt:O(),_id:T.id,email:T.email,isAdmin:T.isAdmin,password:e.password===T.password?null:T.password})}).then(function(){var e=Object(y.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:200===t.status?(console.log("update user succeeded"),alert("User edit success"),H()):(alert("User edit failed, please try again later"),console.log("update user failed"));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e),alert("User edit failed, please try again later")})),x(!1)},q=function(){fetch("https://www.elks.codes/server/user/register",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({jwt:O(),email:T.email,isAdmin:T.isAdmin,password:T.password})}).then(function(){var e=Object(y.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:200===t.status?(console.log("add user succeeded"),alert("User successfully added"),H()):409===t.status?(console.log("HERE"),alert("User with this email already exists")):(alert("Add User failed, please try again later"),console.log("add user failed"));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e),alert("Add User failed, please try again later")})),A(!1)};return Object(c.useEffect)((function(){H()}),[]),Object(c.useEffect)((function(){var e=i.map((function(e){return Object(f.jsx)("li",{children:Object(f.jsxs)("div",{children:[Object(f.jsxs)("p",{children:["Email: ",e.email]}),Object(f.jsxs)("p",{children:["Hashed Password: ",e.password]}),Object(f.jsxs)("p",{children:["Is Admin: ",e.isAdmin?"Yes":"No"]}),Object(f.jsx)("button",{onClick:function(){!function(e){E(e),x(!0)}(e)},children:"Edit"}),Object(f.jsx)("button",{onClick:function(){!function(e){E(e),C(!0)}(e)},children:"Delete"}),Object(f.jsxs)(Y.a,{maxWidth:"xl",fullWidth:!0,open:p,onClose:P,"aria-labelledby":"form-dialog-title",children:[Object(f.jsx)(W.a,{id:"edit-user-dialog-title",children:"Edit User"}),Object(f.jsxs)(M.a,{children:[Object(f.jsx)("p",{children:" Leave Password blank if you do not wish to change it"}),Object(f.jsxs)("span",{style:{color:"gray"},children:[" ",Object(f.jsx)("small",{children:"Email: \xa0 "})]}),Object(f.jsxs)("span",{children:[" ",T.email," "]}),Object(f.jsx)("br",{}),Object(f.jsxs)("span",{style:{color:"gray"},children:[" ",Object(f.jsx)("small",{children:"Password: \xa0 "})]}),Object(f.jsx)(D.a,{name:"password",id:"password",onChange:function(e){return E(Object(G.a)(Object(G.a)({},T),{},{password:e.target.value}))},value:T.password}),Object(f.jsx)("br",{}),Object(f.jsxs)("span",{style:{color:"gray"},children:[" ",Object(f.jsx)("small",{children:"Is Admin\xa0 "})]}),Object(f.jsxs)(J.a,{value:T.isAdmin,onChange:function(e){return E(Object(G.a)(Object(G.a)({},T),{},{isAdmin:e.target.value}))},inputProps:{name:"isAdmin",id:"isAdmin"},children:[Object(f.jsx)(B.a,{value:!1,children:"No"}),Object(f.jsx)(B.a,{value:!0,children:"Yes"})]})]}),Object(f.jsxs)(F.a,{children:[Object(f.jsx)(_.a,{onClick:P,color:"primary",children:"Cancel"}),Object(f.jsx)(_.a,{onClick:X,color:"primary",children:"Submit"})]})]}),Object(f.jsxs)(Y.a,{maxWidth:"xl",fullWidth:!0,open:v,onClose:U,"aria-labelledby":"form-dialog-title",children:[Object(f.jsx)(W.a,{id:"add-user-dialog-title",children:"Add User"}),Object(f.jsxs)(M.a,{children:[Object(f.jsxs)("span",{style:{color:"gray"},children:[" ",Object(f.jsx)("small",{children:"Email: \xa0 "})]}),Object(f.jsx)(D.a,{name:"email",id:"email",onChange:function(e){return E(Object(G.a)(Object(G.a)({},T),{},{email:e.target.value}))},value:T.email}),Object(f.jsx)("br",{}),Object(f.jsxs)("span",{style:{color:"gray"},children:[" ",Object(f.jsx)("small",{children:"Password: \xa0 "})]}),Object(f.jsx)(D.a,{name:"password",id:"password",onChange:function(e){return E(Object(G.a)(Object(G.a)({},T),{},{password:e.target.value}))},value:T.password}),Object(f.jsx)("br",{}),Object(f.jsxs)("span",{style:{color:"gray"},children:[" ",Object(f.jsx)("small",{children:"Is Admin\xa0 "})]}),Object(f.jsxs)(J.a,{value:T.isAdmin,onChange:function(e){return E(Object(G.a)(Object(G.a)({},T),{},{isAdmin:e.target.value}))},inputProps:{name:"isAdmin",id:"isAdmin"},children:[Object(f.jsx)(B.a,{value:!1,children:"No"}),Object(f.jsx)(B.a,{value:!0,children:"Yes"})]})]}),Object(f.jsxs)(F.a,{children:[Object(f.jsx)(_.a,{onClick:U,color:"primary",children:"Cancel"}),Object(f.jsx)(_.a,{onClick:q,color:"primary",children:"Submit"})]})]}),Object(f.jsxs)(Y.a,{maxWidth:"xl",fullWidth:!0,open:k,onClose:R,"aria-labelledby":"form-dialog-title",children:[Object(f.jsx)(W.a,{id:"add-user-dialog-title",children:"Confirm User Deletion"}),Object(f.jsxs)(M.a,{children:[Object(f.jsxs)("span",{style:{color:"gray"},children:[" ",Object(f.jsx)("small",{children:"Email: \xa0 "})]}),Object(f.jsxs)("span",{children:[" ",T.email]}),Object(f.jsx)("br",{}),Object(f.jsxs)("span",{style:{color:"gray"},children:[" ",Object(f.jsx)("small",{children:"Password: \xa0 "})]}),Object(f.jsxs)("span",{children:[" ",T.password]}),Object(f.jsx)("br",{}),Object(f.jsxs)("span",{style:{color:"gray"},children:[" ",Object(f.jsx)("small",{children:"Is Admin\xa0 "})]}),Object(f.jsxs)("span",{children:[" ",T.isAdmin?"Yes":"No"]})]}),Object(f.jsxs)(F.a,{children:[Object(f.jsx)(_.a,{onClick:R,color:"primary",children:"Cancel"}),Object(f.jsx)(_.a,{onClick:function(){!function(e){fetch("https://www.elks.codes/server/user/".concat(e._id,"?jwt=").concat(O()),{method:"GET"}).then(function(){var e=Object(y.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:200===t.status?(console.log("user successfully deleted"),alert("User successfully deleted"),H()):(alert("User deletion failed, please try again later"),console.log("user deletion failed"));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e),alert("User deletion failed, please try again later")})),C(!1)}(e)},color:"primary",children:"Delete"})]})]})]})},e._id)}));u(e)}),[i,p,v,k,T]),Object(f.jsxs)("div",{children:[Object(f.jsx)("p",{children:"This is the Admin Page"}),Object(f.jsx)("p",{children:"Users: "}),Object(f.jsx)("button",{onClick:function(){E({_id:"",email:"",password:"",isAdmin:!1}),A(!0)},children:" Add User"}),Object(f.jsx)("ul",{children:j})]})}var H=function(){var e=Object(c.useState)(!1),t=Object(a.a)(e,2),n=t[0],s=t[1],i=Object(c.useState)(!1),l=Object(a.a)(i,2),j=l[0],u=l[1];return Object(f.jsx)(r.a,{children:Object(f.jsx)(m,{loginState:{logIn:j,setLogIn:u},adminState:{isAdmin:n,setAdmin:s},children:Object(f.jsxs)(o.c,{children:[Object(f.jsx)(o.a,{exact:!0,path:d.LOGIN,children:Object(f.jsx)(E,{loginState:{logIn:j,setLogIn:u},adminState:{isAdmin:n,setAdmin:s}})}),Object(f.jsx)(o.a,{exact:!0,path:d.LOGOUT,children:Object(f.jsx)(P,{})}),Object(f.jsx)(o.a,{exact:!0,path:d.LANDING,children:Object(f.jsx)(g,{})}),Object(f.jsx)(o.a,{exact:!0,path:d.VIS1,children:Object(f.jsx)(k,{loginState:{logIn:j,setLogIn:u},adminState:{isAdmin:n,setAdmin:s}})}),Object(f.jsx)(o.a,{exact:!0,path:d.VIS2,children:Object(f.jsx)(C,{loginState:{logIn:j,setLogIn:u},adminState:{isAdmin:n,setAdmin:s}})}),Object(f.jsx)(o.a,{exact:!0,path:d.VIS3,children:Object(f.jsx)(L,{loginState:{logIn:j,setLogIn:u},adminState:{isAdmin:n,setAdmin:s}})}),Object(f.jsx)(o.a,{exact:!0,path:d.ADMIN,children:Object(f.jsx)(R,{loginState:{logIn:j,setLogIn:u},adminState:{isAdmin:n,setAdmin:s}})}),Object(f.jsx)(o.a,{path:"/",children:Object(f.jsx)(U,{})})]})})})},X=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,387)).then((function(t){var n=t.getCLS,c=t.getFID,s=t.getFCP,i=t.getLCP,a=t.getTTFB;n(e),c(e),s(e),i(e),a(e)}))};i.a.render(Object(f.jsx)(H,{}),document.getElementById("root")),X()}},[[332,1,2]]]);
//# sourceMappingURL=main.46a771bc.chunk.js.map